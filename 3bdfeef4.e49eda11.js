(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{149:function(e,t,r){"use strict";r.d(t,"a",(function(){return p})),r.d(t,"b",(function(){return d}));var o=r(0),a=r.n(o);function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t){if(null==e)return{};var r,o,a=function(e,t){if(null==e)return{};var r,o,a={},n=Object.keys(e);for(o=0;o<n.length;o++)r=n[o],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(o=0;o<n.length;o++)r=n[o],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var c=a.a.createContext({}),u=function(e){var t=a.a.useContext(c),r=t;return e&&(r="function"==typeof e?e(t):s(s({},t),e)),r},p=function(e){var t=u(e.components);return a.a.createElement(c.Provider,{value:t},e.children)},b={inlineCode:"code",wrapper:function(e){var t=e.children;return a.a.createElement(a.a.Fragment,{},t)}},m=a.a.forwardRef((function(e,t){var r=e.components,o=e.mdxType,n=e.originalType,i=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),p=u(r),m=o,d=p["".concat(i,".").concat(m)]||p[m]||b[m]||n;return r?a.a.createElement(d,s(s({ref:t},c),{},{components:r})):a.a.createElement(d,s({ref:t},c))}));function d(e,t){var r=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var n=r.length,i=new Array(n);i[0]=m;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:o,i[1]=s;for(var c=2;c<n;c++)i[c]=r[c];return a.a.createElement.apply(null,i)}return a.a.createElement.apply(null,r)}m.displayName="MDXCreateElement"},89:function(e,t,r){"use strict";r.r(t),r.d(t,"frontMatter",(function(){return i})),r.d(t,"metadata",(function(){return s})),r.d(t,"toc",(function(){return l})),r.d(t,"default",(function(){return u}));var o=r(3),a=r(7),n=(r(0),r(149)),i={id:"restore-system",title:"How to restore the system from backup?",sidebar_label:"Restore system"},s={unversionedId:"restore-system",id:"restore-system",isDocsHomePage:!1,title:"How to restore the system from backup?",description:"It could happen that something (e.g. Nextcloud) fails and you need to restore the system to an earlier state. It will automatically restore the whole root partition from the backup that you choose but will leave the external drives untouched. Hint: if you only want to restore some private files manually, you should follow How to restore files from backup?",source:"@site/docs/restore-system.md",slug:"/restore-system",permalink:"/Nextcloud-NAS-Guide/docs/restore-system",editUrl:"https://github.com/szaimen/Nextcloud-NAS-Guide/edit/main/docs/restore-system.md",version:"current",sidebar_label:"Restore system",sidebar:"docs",previous:{title:"How to restore files from backup?",permalink:"/Nextcloud-NAS-Guide/docs/restore-files"},next:{title:"How to create a subdomain and point with CNAME to your Nextcloud Domain?",permalink:"/Nextcloud-NAS-Guide/docs/subdomain-cname"}},l=[{value:"Preparation",id:"preparation",children:[]},{value:"Execution",id:"execution",children:[]}],c={toc:l};function u(e){var t=e.components,r=Object(a.a)(e,["components"]);return Object(n.b)("wrapper",Object(o.a)({},c,r,{components:t,mdxType:"MDXLayout"}),Object(n.b)("p",null,"It could happen that something (e.g. Nextcloud) fails and you need to restore the system to an earlier state. It will automatically restore the whole root partition from the backup that you choose but will leave the external drives untouched. Hint: if you only want to restore some private files manually, you should follow ",Object(n.b)("a",Object(o.a)({parentName:"p"},{href:"./restore-files"}),"How to restore files from backup?")),Object(n.b)("h3",{id:"preparation"},"Preparation"),Object(n.b)("ol",null,Object(n.b)("li",{parentName:"ol"},"Create a Backup by running",Object(n.b)("pre",{parentName:"li"},Object(n.b)("code",Object(o.a)({parentName:"pre"},{className:"language-shell"}),"sudo bash /var/scripts/daily-borg-backup.sh\n")))),Object(n.b)("h3",{id:"execution"},"Execution"),Object(n.b)("ol",null,Object(n.b)("li",{parentName:"ol"},"Run over CLI:",Object(n.b)("pre",{parentName:"li"},Object(n.b)("code",Object(o.a)({parentName:"pre"},{className:"language-shell"}),"sudo bash /var/scripts/not-supported.sh\n"))),Object(n.b)("li",{parentName:"ol"},"Choose ",Object(n.b)("inlineCode",{parentName:"li"},"System Restore")),Object(n.b)("li",{parentName:"ol"},Object(n.b)("strong",{parentName:"li"},"Confirm")," that you want to restore your system to a previous state"),Object(n.b)("li",{parentName:"ol"},"If both backup drives are connected, ",Object(n.b)("strong",{parentName:"li"},"select the backup drive")," that you want to view backups from (most likely the daily backup drive)"),Object(n.b)("li",{parentName:"ol"},"Select a ",Object(n.b)("strong",{parentName:"li"},"backup archive")," that you want to restore to (you will see the date and time when it was made)"),Object(n.b)("li",{parentName:"ol"},"Read through and ",Object(n.b)("strong",{parentName:"li"},"confirm")," the next two popups"),Object(n.b)("li",{parentName:"ol"},Object(n.b)("strong",{parentName:"li"},"Wait")," until you see the next Menu! (",Object(n.b)("strong",{parentName:"li"},"This is crutial!"),")"),Object(n.b)("li",{parentName:"ol"},"Now you should see a Menu that states that the dry-run was successful. You can now show all files/folders that will get changed/deleted. After you are done, just select ",Object(n.b)("inlineCode",{parentName:"li"},"Continue")," and press ",Object(n.b)("inlineCode",{parentName:"li"},"[ENTER]")," to continue."),Object(n.b)("li",{parentName:"ol"},"Now you will see a popup with stats from the dry-run. This is an overview about the operation."),Object(n.b)("li",{parentName:"ol"},"You will be asked next if you really want to restore your system to this state. Now select ",Object(n.b)("inlineCode",{parentName:"li"},"Yes")," and press ",Object(n.b)("inlineCode",{parentName:"li"},"[ENTER]")," if you are sure. (This is the last chance to cancel the operation!)"),Object(n.b)("li",{parentName:"ol"},"Wait until it has restored the system and you see a popup that the restore process was successful."),Object(n.b)("li",{parentName:"ol"},"Finally, press ",Object(n.b)("inlineCode",{parentName:"li"},"[ENTER]")," to ",Object(n.b)("strong",{parentName:"li"},"reboot")," your server.")))}u.isMDXComponent=!0}}]);