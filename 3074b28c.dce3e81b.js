(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{146:function(e,t,a){"use strict";a.d(t,"a",(function(){return d})),a.d(t,"b",(function(){return p}));var n=a(0),r=a.n(n);function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function l(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function s(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?l(Object(a),!0).forEach((function(t){o(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function i(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var c=r.a.createContext({}),u=function(e){var t=r.a.useContext(c),a=t;return e&&(a="function"==typeof e?e(t):s(s({},t),e)),a},d=function(e){var t=u(e.components);return r.a.createElement(c.Provider,{value:t},e.children)},b={inlineCode:"code",wrapper:function(e){var t=e.children;return r.a.createElement(r.a.Fragment,{},t)}},h=r.a.forwardRef((function(e,t){var a=e.components,n=e.mdxType,o=e.originalType,l=e.parentName,c=i(e,["components","mdxType","originalType","parentName"]),d=u(a),h=n,p=d["".concat(l,".").concat(h)]||d[h]||b[h]||o;return a?r.a.createElement(p,s(s({ref:t},c),{},{components:a})):r.a.createElement(p,s({ref:t},c))}));function p(e,t){var a=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var o=a.length,l=new Array(o);l[0]=h;var s={};for(var i in t)hasOwnProperty.call(t,i)&&(s[i]=t[i]);s.originalType=e,s.mdxType="string"==typeof e?e:n,l[1]=s;for(var c=2;c<o;c++)l[c]=a[c];return r.a.createElement.apply(null,l)}return r.a.createElement.apply(null,a)}h.displayName="MDXCreateElement"},85:function(e,t,a){"use strict";a.r(t),a.d(t,"frontMatter",(function(){return l})),a.d(t,"metadata",(function(){return s})),a.d(t,"toc",(function(){return i})),a.d(t,"default",(function(){return u}));var n=a(3),r=a(7),o=(a(0),a(146)),l={id:"create-shares",title:"How to create SMB-shares and mount it to Nextcloud in one go?",sidebar_label:"Create SMB-shares and mount it to Nextcloud"},s={unversionedId:"create-shares",id:"create-shares",isDocsHomePage:!1,title:"How to create SMB-shares and mount it to Nextcloud in one go?",description:"The big advantage is, that you can create a SMB-share and mount the same location to Nextcloud in one go.",source:"@site/docs/create-shares.md",slug:"/create-shares",permalink:"/Nextcloud-NAS-Guide/docs/create-shares",editUrl:"https://github.com/szaimen/Nextcloud-NAS-Guide/edit/main/docs/create-shares.md",version:"current",sidebar_label:"Create SMB-shares and mount it to Nextcloud",sidebar:"someSidebar",previous:{title:"How to create SMB-users and Nextcloud users in one go?",permalink:"/Nextcloud-NAS-Guide/docs/create-users"},next:{title:"How to make the root directory in Nextcloud read only for all users?",permalink:"/Nextcloud-NAS-Guide/docs/readonly-root"}},i=[],c={toc:i};function u(e){var t=e.components,a=Object(r.a)(e,["components"]);return Object(o.b)("wrapper",Object(n.a)({},c,a,{components:t,mdxType:"MDXLayout"}),Object(o.b)("p",null,"The big advantage is, that you can create a SMB-share and mount the same location to Nextcloud in one go."),Object(o.b)("p",null,"If you have followed this guide, you should have set up a ",Object(o.b)("strong",{parentName:"p"},"sensible folder structure")," on the external data SSD/HDD by now. Based on this structure, you should ",Object(o.b)("strong",{parentName:"p"},"share")," the ",Object(o.b)("inlineCode",{parentName:"p"},"user folders")," with the corresponding user that you just created. The ",Object(o.b)("inlineCode",{parentName:"p"},"data exchange")," folders should get shared with the users that shall have access to those folders. "),Object(o.b)("p",null,"If you have mounted the external data SSD/HDD in ",Object(o.b)("inlineCode",{parentName:"p"},"/mnt/data")," as recommended, is here one example:\nYour data folder should be now found in ",Object(o.b)("inlineCode",{parentName:"p"},"/mnt/data/your data folder"),". One of your user folders and data exchange folders might be ",Object(o.b)("inlineCode",{parentName:"p"},"/mnt/data/your data folder/user1 folder")," and ",Object(o.b)("inlineCode",{parentName:"p"},"/mnt/data/your data folder/Data exchange folder")," now. You should then ",Object(o.b)("strong",{parentName:"p"},"share")," the ",Object(o.b)("inlineCode",{parentName:"p"},"/mnt/data/your data folder/user1 folder")," with ",Object(o.b)("inlineCode",{parentName:"p"},"user1")," and the ",Object(o.b)("inlineCode",{parentName:"p"},"/mnt/data/your data folder/Data exchange folder")," with all users that shall get access to this folder. As you now see, best case is, if the user folders on your external data SSD/HDD match exactly the user count of newly created users."),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"BTW"),": you can at this point still shutdown your server, disconnect the external data SSD/HDD, connect it to your PC, open it with ",Object(o.b)("inlineCode",{parentName:"p"},"Veracrypt")," and change the folder structure there. Afterwards you can connect the drive to your server again and power it back on."),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Based on the example above, you should now create a list how do you want to share your data with your users.")),Object(o.b)("p",null,"Here is how to work off this list technically:"),Object(o.b)("ol",null,Object(o.b)("li",{parentName:"ol"},"Go back to the ",Object(o.b)("strong",{parentName:"li"},"SMB-server Main Menu")," and select ",Object(o.b)("inlineCode",{parentName:"li"},"Open the SMB-share Menu")),Object(o.b)("li",{parentName:"ol"},"Choose ",Object(o.b)("inlineCode",{parentName:"li"},"Create a SMB-share")),Object(o.b)("li",{parentName:"ol"},"You will see now a list of valid directories you can type in"),Object(o.b)("li",{parentName:"ol"},"Type in one ",Object(o.b)("strong",{parentName:"li"},"directory")," that you want to share. Based on the example above, it could be e.g. ",Object(o.b)("inlineCode",{parentName:"li"},"/mnt/data/your data folder/user1 folder")," or ",Object(o.b)("inlineCode",{parentName:"li"},"/mnt/data/your data folder/Data exchange folder")),Object(o.b)("li",{parentName:"ol"},"Type in the ",Object(o.b)("strong",{parentName:"li"},"Share name")," that you want to use. It should most likely have the same name like the folder that you want to share. Please note, that spaces are not supported. For e.g. ",Object(o.b)("inlineCode",{parentName:"li"},"user1 folder")," you would thus need to use ",Object(o.b)("inlineCode",{parentName:"li"},"user1_folder")," or ",Object(o.b)("inlineCode",{parentName:"li"},"user1-folder")," as name"),Object(o.b)("li",{parentName:"ol"},"Now ",Object(o.b)("strong",{parentName:"li"},"select the SMB-users")," that shall get ",Object(o.b)("strong",{parentName:"li"},"access")," to the share. If it is a ",Object(o.b)("inlineCode",{parentName:"li"},"user folder"),", you should only share it with the corresponding user. If it is a ",Object(o.b)("inlineCode",{parentName:"li"},"Data exchange folder"),", you should share it with all users that shall get access to the folder."),Object(o.b)("li",{parentName:"ol"},"Now select if the share shall be ",Object(o.b)("strong",{parentName:"li"},"writeable"),", which you should most likely answer with ",Object(o.b)("inlineCode",{parentName:"li"},"Yes")),Object(o.b)("li",{parentName:"ol"},"After restarting Samba, the SMB-share should be successfully created!"),Object(o.b)("li",{parentName:"ol"},"Select that you ",Object(o.b)("strong",{parentName:"li"},"want to mount")," the same directory to Nextcloud as local storage (you are making the path that you've chosen in the beginning accessible in Nextcloud this way)"),Object(o.b)("li",{parentName:"ol"},"You can now change the name of your directory for the usage in Nextcloud. Recommended is to just use the already chosen name."),Object(o.b)("li",{parentName:"ol"},"Now everything should get set up automatically"),Object(o.b)("li",{parentName:"ol"},"Enabling Inotify is ",Object(o.b)("strong",{parentName:"li"},"not")," recommended and normally not necessary")),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Now repeat that method for the whole list that you've made, starting at point 2."),"\n(If you are done, please don't close the script! You will need it again in the next step!)"),Object(o.b)("p",null,"Please note that you can always change the settings for your mounts in Nextcloud by opening ",Object(o.b)("inlineCode",{parentName:"p"},"https://yourdomain-or-ipaddress/settings/admin/externalstorages")," with your Nextcloud admin account afterwards."),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Your users should also be able to access their files and folders using SMB over the local network (as shown during point 8).")))}u.isMDXComponent=!0}}]);