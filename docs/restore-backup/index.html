<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.70">
<link rel="alternate" type="application/rss+xml" href="/Nextcloud-NAS-Guide/blog/rss.xml" title="Nextcloud-NAS-Guide Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/Nextcloud-NAS-Guide/blog/atom.xml" title="Nextcloud-NAS-Guide Blog Atom Feed">
<link rel="alternate" type="application/rss+xml" href="/Nextcloud-NAS-Guide/news/rss.xml" title="Nextcloud-NAS-Guide Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/Nextcloud-NAS-Guide/news/atom.xml" title="Nextcloud-NAS-Guide Blog Atom Feed"><title data-react-helmet="true">How to restore a Backup on a different server or upgrade Ubuntu? | Nextcloud-NAS-Guide</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="How to restore a Backup on a different server or upgrade Ubuntu? | Nextcloud-NAS-Guide"><meta data-react-helmet="true" name="description" content="Theoretically it could happen that your system drive fails or that you need to update the Ubuntu version."><meta data-react-helmet="true" property="og:description" content="Theoretically it could happen that your system drive fails or that you need to update the Ubuntu version."><meta data-react-helmet="true" property="og:url" content="https://szaimen.github.io/Nextcloud-NAS-Guide/docs/restore-backup"><link data-react-helmet="true" rel="shortcut icon" href="/Nextcloud-NAS-Guide/img/favicon.webp"><link data-react-helmet="true" rel="canonical" href="https://szaimen.github.io/Nextcloud-NAS-Guide/docs/restore-backup"><link rel="stylesheet" href="/Nextcloud-NAS-Guide/styles.0df84956.css">
<link rel="preload" href="/Nextcloud-NAS-Guide/styles.6ab8f100.js" as="script">
<link rel="preload" href="/Nextcloud-NAS-Guide/runtime~main.3412b025.js" as="script">
<link rel="preload" href="/Nextcloud-NAS-Guide/main.b09f4235.js" as="script">
<link rel="preload" href="/Nextcloud-NAS-Guide/1.c7bdbf01.js" as="script">
<link rel="preload" href="/Nextcloud-NAS-Guide/2.788bbeb7.js" as="script">
<link rel="preload" href="/Nextcloud-NAS-Guide/01a85c17.abdd3cf0.js" as="script">
<link rel="preload" href="/Nextcloud-NAS-Guide/1a4e3797.08ebf7a4.js" as="script">
<link rel="preload" href="/Nextcloud-NAS-Guide/1be78505.157dd22c.js" as="script">
<link rel="preload" href="/Nextcloud-NAS-Guide/6875c492.e45179b6.js" as="script">
<link rel="preload" href="/Nextcloud-NAS-Guide/a6aa9e1f.a2e56d0e.js" as="script">
<link rel="preload" href="/Nextcloud-NAS-Guide/c4f5d8e4.c1d4e765.js" as="script">
<link rel="preload" href="/Nextcloud-NAS-Guide/ccc49370.6313d194.js" as="script">
<link rel="preload" href="/Nextcloud-NAS-Guide/130.fbc7aa28.js" as="script">
<link rel="preload" href="/Nextcloud-NAS-Guide/129.c0ba868f.js" as="script">
<link rel="preload" href="/Nextcloud-NAS-Guide/935f2afb.40e6de12.js" as="script">
<link rel="preload" href="/Nextcloud-NAS-Guide/17896441.4a8beff2.js" as="script">
<link rel="preload" href="/Nextcloud-NAS-Guide/093e44df.3b29c46f.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav aria-label="Skip navigation links"><button type="button" tabindex="0" class="skipToContent_11B0">Skip to main content</button></nav><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/Nextcloud-NAS-Guide/"><img src="/Nextcloud-NAS-Guide/img/favicon.webp" alt="My Site Logo" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/Nextcloud-NAS-Guide/img/favicon.webp" alt="My Site Logo" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"><strong class="navbar__title">Nextcloud-NAS</strong></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/Nextcloud-NAS-Guide/docs/">Guide</a><a class="navbar__item navbar__link" href="/Nextcloud-NAS-Guide/news">News</a><a href="https://github.com/szaimen/Nextcloud-NAS-Guide/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a></div><div class="navbar__items navbar__items--right"><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2N3Q"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_3NWk">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_3NWk">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div><div class="navbar__search searchBarContainer_1-U_"><input placeholder="Search" aria-label="Search" class="navbar__search-input"><div class="loadingRing_18Th searchBarLoadingRing_zYFK"><div></div><div></div><div></div><div></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/Nextcloud-NAS-Guide/"><img src="/Nextcloud-NAS-Guide/img/favicon.webp" alt="My Site Logo" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/Nextcloud-NAS-Guide/img/favicon.webp" alt="My Site Logo" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"><strong class="navbar__title">Nextcloud-NAS</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/Nextcloud-NAS-Guide/docs/">Guide</a></li><li class="menu__list-item"><a class="menu__link" href="/Nextcloud-NAS-Guide/news">News</a></li><li class="menu__list-item"><a href="https://github.com/szaimen/Nextcloud-NAS-Guide/" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_vMrn"><div class="docSidebarContainer_3Ak5" role="complementary"><div class="sidebar_3gvy"><div class="menu menu--responsive thin-scrollbar menu_1yIk"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_1CUI" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Nextcloud-NAS-Guide</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Nextcloud-NAS-Guide/docs/">Introduction</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Nextcloud-NAS-Guide/docs/instructions">Instructions</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Before you start</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Nextcloud-NAS-Guide/docs/before-start">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Nextcloud-NAS-Guide/docs/considerations">Considerations</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Nextcloud-NAS-Guide/docs/minimal-requirements">Minimal Requirements</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Nextcloud-NAS-Guide/docs/hardware-recommendations">Hardware recommendations</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Nextcloud-NAS-Guide/docs/preparations">Preparations</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Nextcloud-NAS-Guide/docs/time-indication">Time indication</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Basic setup</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Nextcloud-NAS-Guide/docs/basic-setup">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Nextcloud-NAS-Guide/docs/bios-uefi">BIOS/UEFI</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Nextcloud-NAS-Guide/docs/ubuntu">Ubuntu</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Nextcloud-NAS-Guide/docs/ssh">SSH</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Nextcloud-NAS-Guide/docs/tpm2">TPM2 unlocking &amp; Secure GRUB</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Nextcloud-NAS-Guide/docs/install-nextcloud">Install Nextcloud</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Nextcloud-NAS-Guide/docs/nextcloud-startup">Nextcloud startup</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Nextcloud-NAS-Guide/docs/usb-boot">Disable USB-boot</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Security and Automation</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Nextcloud-NAS-Guide/docs/security-automation">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Nextcloud-NAS-Guide/docs/geoblock">Geoblocking</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Nextcloud-NAS-Guide/docs/smart">Disk Monitoring</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Nextcloud-NAS-Guide/docs/fail2ban">Fail2Ban</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Nextcloud-NAS-Guide/docs/clamav">ClamAV</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Nextcloud-NAS-Guide/docs/automatic-updates">Automatic updates</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Backup</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Nextcloud-NAS-Guide/docs/backup">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Nextcloud-NAS-Guide/docs/smtp-mail">SMTP Mail</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Nextcloud-NAS-Guide/docs/not-supported">Not-supported Menu</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">External data SSD/HDD</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Nextcloud-NAS-Guide/docs/data-ssd">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Nextcloud-NAS-Guide/docs/format-encrypt-mount">Format, encrypt &amp; mount</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Nextcloud-NAS-Guide/docs/access-veracrypt">PC access</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Nextcloud-NAS-Guide/docs/sensible-folder-structure">Sensible folder structure</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">External backup HDD&#x27;s</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Nextcloud-NAS-Guide/docs/backup-hdds">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Nextcloud-NAS-Guide/docs/format-backup-hdds">Format</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Nextcloud-NAS-Guide/docs/mount-backup-hdds">Mount</a></li></ul></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Nextcloud-NAS-Guide/docs/update-manually">Update manually Nextcloud minor</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Nextcloud-NAS-Guide/docs/daily-backup">Daily Backup</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Nextcloud-NAS-Guide/docs/offshore-backup">Off-Shore Backup</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">SMB-server</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Nextcloud-NAS-Guide/docs/smb-server">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Nextcloud-NAS-Guide/docs/run-smb-server">Run the SMB-server script</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Nextcloud-NAS-Guide/docs/create-users">Create SMB-users and Nextcloud users</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Nextcloud-NAS-Guide/docs/create-shares">Create SMB-shares and mount it to Nextcloud</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Customize Nextcloud</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Nextcloud-NAS-Guide/docs/customize-nextcloud">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Nextcloud-NAS-Guide/docs/previewgenerator">Previewgenerator</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Nextcloud-NAS-Guide/docs/cookielifetime">CookieLifetime</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Nextcloud-NAS-Guide/docs/share-folder">Share-folder</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Nextcloud-NAS-Guide/docs/workspaces">Workspaces</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Nextcloud-NAS-Guide/docs/user-flows">User Flows</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Activate Let&#x27;s Encrypt</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Nextcloud-NAS-Guide/docs/activate-lets-encrypt">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Nextcloud-NAS-Guide/docs/ddns">DDNS</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Nextcloud-NAS-Guide/docs/ddns-providers">DDNS-providers</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Nextcloud-NAS-Guide/docs/activate-ddns">Activate DDNS</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Nextcloud-NAS-Guide/docs/configure-ddclient">Configure DDclient</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Nextcloud-NAS-Guide/docs/port-forwarding">Port Forwarding</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Nextcloud-NAS-Guide/docs/activate-tls">Activate TLS</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Nextcloud-NAS-Guide/docs/congratulations">Congratulations</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Optional</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Nextcloud-NAS-Guide/docs/optional">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Nextcloud-NAS-Guide/docs/firewall">Firewall</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Nextcloud-NAS-Guide/docs/harden-ssh">Harden SSH</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Nextcloud-NAS-Guide/docs/onlyoffice">OnlyOffice</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Nextcloud-NAS-Guide/docs/hpb">High-Performance backend for Nextcloud Talk</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Nextcloud-NAS-Guide/docs/notify_push">Push Notifications for Nextcloud</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Nextcloud-NAS-Guide/docs/whiteboard">Whiteboard</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Nextcloud-NAS-Guide/docs/pico">Pico CMS</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Nextcloud-NAS-Guide/docs/extract">Extract</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Nextcloud-NAS-Guide/docs/bitwarden-rs">Bitwarden RS</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Nextcloud-NAS-Guide/docs/pi-hole">Pi-hole</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Nextcloud-NAS-Guide/docs/pivpn">PiVPN</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Nextcloud-NAS-Guide/docs/change-update-time">Change update time</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Nextcloud-NAS-Guide/docs/pms">PLEX Media Server</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Nextcloud-NAS-Guide/docs/remotedesktop">Remotedesktop</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Nextcloud-NAS-Guide/docs/digitize">Digitize Blu-rays, DVDs &amp; CDs</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Nextcloud-NAS-Guide/docs/mc">Midnight Commander</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Nextcloud-NAS-Guide/docs/more-apps">More apps</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">FAQ</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Nextcloud-NAS-Guide/docs/faq">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Nextcloud-NAS-Guide/docs/improve-performance">Improve Nextcloud Performance</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Nextcloud-NAS-Guide/docs/manual-backup">Manual Backup</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Nextcloud-NAS-Guide/docs/major-update">Major Nextcloud Update</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Nextcloud-NAS-Guide/docs/create-new-users">Create new users after initial setup</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Nextcloud-NAS-Guide/docs/restore-files">Restore files</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Nextcloud-NAS-Guide/docs/restore-system">Restore system</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Nextcloud-NAS-Guide/docs/subdomain-cname">Create subdomain and edit CNAME entry</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Nextcloud-NAS-Guide/docs/mount-hdd">Mount HDD for Movies/TV-Shows</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Nextcloud-NAS-Guide/docs/smb-connect">Connect via SMB</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Nextcloud-NAS-Guide/docs/rdp-connect">Connect via Remotedesktop</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Nextcloud-NAS-Guide/docs/lynis">Security Audit</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/Nextcloud-NAS-Guide/docs/restore-backup">Restore Backup/Upgrade Ubuntu</a></li></ul></li></ul></div></div></div><main class="docMainContainer_2iGs"><div class="container padding-vert--lg docItemWrapper_1bxp"><div class="row"><div class="col docItemCol_U38p"><div class="docItemContainer_a7m4"><article><header><h1 class="docTitle_Oumm">How to restore a Backup on a different server or upgrade Ubuntu?</h1></header><div class="markdown"><p>Theoretically it could happen that your system drive fails or that you need to update the Ubuntu version.
In those cases you need to reinstall Ubuntu and thus restore a backup on a different server (it looks like it is a different server for the scripts).</p><p>Here is what you need to do in those cases:</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="preparations-if-your-server-doesnt-work-because-of-a-failed-system-drive"></a>Preparations (if your server doesn&#x27;t work because of a failed system drive)<a class="hash-link" href="#preparations-if-your-server-doesnt-work-because-of-a-failed-system-drive" title="Direct link to heading">#</a></h2><ol><li>Buy a new with your server compatible internal SSD (recommended specifications describe <a href="/Nextcloud-NAS-Guide/docs/hardware-recommendations#general-hardware-recommendations">here</a>)</li><li>Put the new drive into your server</li></ol><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="preparations-if-you-want-to-upgrade-ubuntu"></a>Preparations (if you want to upgrade Ubuntu)<a class="hash-link" href="#preparations-if-you-want-to-upgrade-ubuntu" title="Direct link to heading">#</a></h2><ol><li>Update to the latest major Nextcloud release by following the instructions here: <a href="/Nextcloud-NAS-Guide/docs/major-update">click here</a><div class="admonition admonition-caution alert alert--warning"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</h5></div><div class="admonition-content"><p>Please read carefully through all info there, especially the <code>Things to check before updating</code> section before updating. (E.g. it is not recommended to update to any new major Nextcloud release before the first point release: all info there is valid here, too.)</p></div></div></li><li>Create a backup of your server (<a href="/Nextcloud-NAS-Guide/docs/manual-backup">instructions</a>)</li><li>Only if the backup (from step 2) was created successfully (otherwise skip this 3rd step!), get your <code>Off-Shore Backup HDD</code>, connect it to your server and create a new off-shore backup by running:<div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-shell codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">sudo</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">sed</span><span class="token plain"> -i </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;s|^DAYS_SINCE_LAST_BACKUP.*|DAYS_SINCE_LAST_BACKUP=1000|&#x27;</span><span class="token plain"> /var/scripts/off-shore-rsync-backup.sh </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;&amp;</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">sudo</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">bash</span><span class="token plain"> /var/scripts/off-shore-rsync-backup.sh</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><div class="admonition admonition-caution alert alert--warning"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</h5></div><div class="admonition-content"><p>You should really only create a new off-shore backup if the backup from step 2 was created successfully!</p></div></div></li><li>Use your <strong>last chance</strong> and find out if you still have the passphrase of your backup stored at a safe place by comparing it with the output of:<div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-shell codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">sudo</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">grep</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;ENCRYPTION_KEY&quot;</span><span class="token plain"> /var/scripts/daily-borg-backup.sh</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><div class="admonition admonition-caution alert alert--warning"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</h5></div><div class="admonition-content"><p>If you don&#x27;t have it stored, just <strong>note it down</strong> another time. <strong>This is crutial!</strong><br>
(because this is the last chance to retrieve the password from your server)</p></div></div></li></ol><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="execution"></a>Execution<a class="hash-link" href="#execution" title="Direct link to heading">#</a></h2><ol><li><strong>Shut down</strong> your server by pressing the power button</li><li><strong>Disconnect</strong> all external drives from your server</li><li><strong>Execute</strong> the complete Basic setup section (<a href="/Nextcloud-NAS-Guide/docs/basic-setup">this section</a>)<br><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>Don&#x27;t go any further and stop at the beginning of the next section!<br>
(This is the last step that shall get executed: <a href="/Nextcloud-NAS-Guide/docs/usb-boot">click here</a>)</p></div></div></li><li>If you are done with the basic setup section, run the manual update once (<a href="/Nextcloud-NAS-Guide/docs/update-manually">instructions</a>)</li><li>Please <strong>don&#x27;t</strong> connect the backup HDD to your server, yet or <strong>disconnect</strong> the backup HDD from your server!</li><li>Now run the restore-backup script by executing:<div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-shell codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">wget</span><span class="token plain"> https://raw.githubusercontent.com/nextcloud/vm/master/not-supported/restore-backup.sh </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;&amp;</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">sudo</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">bash</span><span class="token plain"> restore-backup.sh</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div></li><li>Enter your password</li><li><strong>Confirm</strong> that you want to restore your server from backup</li><li>Press <code>OK</code> to start searching for new backup drives</li><li>Now <strong>connect</strong> one of your backup drives (most likely the daily backup HDD) to your server (you have 1 minute)</li><li>Choose the <strong>NTFS partition</strong> that shall get mounted</li><li><strong>Select</strong> one found valid backup repository</li><li>Enter the <strong>passphrase</strong> that was used to encrypt the backup</li><li><strong>Select</strong> the <code>backup archive</code> that shall get restored (most likely the newest one if your system was in a working state when the backup was created)</li><li><strong>Confirm</strong> that you want to check if the backup extracting works<br>
(If this step takes too long, you can cancel it by pressing <code>[CTRL] + [C]</code>. Then start from step 5 again and skip the <code>extracting check</code>.)</li><li><strong>Confirm</strong> that you want to restore the backup</li><li>Now wait until you see the next popup! (This can take a while.)</li><li>It should now report that the restore was completed and you should connect all drives now. So please <strong>connect all external drives</strong> now that were connected to your old server!</li><li>Press <code>[ENTER]</code> so that they get mounted</li><li>Now you should see a popup were it is recommended to open your nextcloud web interface to confirm that the restore was successful. Do so by opening the suggested link. E.g. <code>https://192.168.178.144</code>. After you&#x27;ve confirmed that Nextcloud works, press <code>[ENTER]</code></li><li>Now it will report to you that you need to reinstall a lot of apps/addons in case they were installed on your old server. This is what you will do next. Press <code>[ENTER]</code> to exit the script.</li></ol><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="reinstall-apps-and-addons"></a>Reinstall Apps and Addons<a class="hash-link" href="#reinstall-apps-and-addons" title="Direct link to heading">#</a></h2><p>If the Nextcloud web interface works as expected, you will need to reinstall all apps/addons that were installed on your old server.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="necessary-are-those"></a>Necessary are those<a class="hash-link" href="#necessary-are-those" title="Direct link to heading">#</a></h3><ol><li>Reinstall Geoblocking (<a href="/Nextcloud-NAS-Guide/docs/geoblock">instructions</a>)</li><li>Reinstall Disk Monitoring (<a href="/Nextcloud-NAS-Guide/docs/smart">instructions</a>)</li><li>Reinstall Fail2Ban (<a href="/Nextcloud-NAS-Guide/docs/fail2ban">instructions</a>)</li><li>Reinstall ClamAV (<a href="/Nextcloud-NAS-Guide/docs/clamav">instructions</a>)</li><li>Reinstall SMTP Mail (<a href="/Nextcloud-NAS-Guide/docs/smtp-mail">instructions</a>)</li><li>Reinstall DDclient (<a href="/Nextcloud-NAS-Guide/docs/configure-ddclient">instructions</a>)</li><li>Reconfigure Port Forwarding (<a href="/Nextcloud-NAS-Guide/docs/port-forwarding">instructions</a>)</li><li>Reactivate TLS for your Nextcloud Domain (<a href="/Nextcloud-NAS-Guide/docs/activate-tls">instructions</a>)</li></ol><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="now-your-nextcloud-should-work-again-completely"></a>Now your Nextcloud should work again completely!<a class="hash-link" href="#now-your-nextcloud-should-work-again-completely" title="Direct link to heading">#</a></h4><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="optional-are-those"></a>Optional are those<a class="hash-link" href="#optional-are-those" title="Direct link to heading">#</a></h3><p>(You only need to reinstall them <strong>if they were installed before</strong>)</p><ul><li>Reenable the Firewall on your server (<a href="/Nextcloud-NAS-Guide/docs/firewall">instructions</a>)</li><li>Reharden the SSH configuration (<a href="/Nextcloud-NAS-Guide/docs/harden-ssh">instructions</a>)</li><li>Reinstall OnlyOffice for Nextcloud (<a href="/Nextcloud-NAS-Guide/docs/onlyoffice">instructions</a>)</li><li>Reinstall High-Performance backend for Nextcloud Talk (<a href="/Nextcloud-NAS-Guide/docs/hpb">instructions</a>)</li><li>Reinstall Push Notifications for Nextcloud (<a href="/Nextcloud-NAS-Guide/docs/notify_push">instructions</a>)</li><li>Reinstall Whiteboard for Nextcloud (<a href="/Nextcloud-NAS-Guide/docs/whiteboard">instructions</a>)</li><li>Reinstall Pico CMS for Nextcloud (<a href="/Nextcloud-NAS-Guide/docs/pico">instructions</a>)</li><li>Reinstall Extract for Nextcloud (<a href="/Nextcloud-NAS-Guide/docs/extract">instructions</a>)</li><li>Reinstall Previewgenerator (<a href="/Nextcloud-NAS-Guide/docs/previewgenerator">instructions</a>)</li><li>Reinstall Bitwarden RS (<a href="/Nextcloud-NAS-Guide/docs/bitwarden-rs">instructions</a>)<div class="admonition admonition-caution alert alert--warning"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</h5></div><div class="admonition-content"><p>Attention! Please use the <strong>same domain</strong> that you&#x27;ve used before for Bitwarden RS (if you&#x27;ve had Bitwarden installed on your old server!)</p></div></div></li><li>Reinstall Pi-hole (<a href="/Nextcloud-NAS-Guide/docs/pi-hole">instructions</a>)</li><li>Reinstall PiVPN (<a href="/Nextcloud-NAS-Guide/docs/pivpn">instructions</a>)</li><li>Redo the change of the update time (<a href="/Nextcloud-NAS-Guide/docs/change-update-time">instructions</a>)</li><li>Reinstall Plex Media Server (<a href="/Nextcloud-NAS-Guide/docs/pms">instructions</a>)<div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>When reinstalling Plex, all drives that Plex shall have access to need to be mounted to the server! (Otherwise there could appear some problems.) You can make sure that this is the case by connecting all drives to your server and rebooting your sever before reinstalling Plex!</p></div></div></li><li>Reinstall Remotedesktop (<a href="/Nextcloud-NAS-Guide/docs/remotedesktop">instructions</a>)</li><li>Reinstall other apps that you might have had installed before (<a href="/Nextcloud-NAS-Guide/docs/more-apps">overview</a>) </li></ul><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>daily backup</h5></div><div class="admonition-content"><p>Please note that the next scheduled daily backup will take a long time because the local borgbackup cache has to be rebuilt. So don&#x27;t be surprised if this is the case since it is completely normal!</p></div></div></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/szaimen/Nextcloud-NAS-Guide/edit/main/docs/restore-backup.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2LL7"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/Nextcloud-NAS-Guide/docs/lynis"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« How to run a security audit on your instance?</div></a></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_2xL- thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#preparations-if-your-server-doesnt-work-because-of-a-failed-system-drive" class="table-of-contents__link">Preparations (if your server doesn&#39;t work because of a failed system drive)</a></li><li><a href="#preparations-if-you-want-to-upgrade-ubuntu" class="table-of-contents__link">Preparations (if you want to upgrade Ubuntu)</a></li><li><a href="#execution" class="table-of-contents__link">Execution</a></li><li><a href="#reinstall-apps-and-addons" class="table-of-contents__link">Reinstall Apps and Addons</a><ul><li><a href="#necessary-are-those" class="table-of-contents__link">Necessary are those</a></li><li><a href="#optional-are-those" class="table-of-contents__link">Optional are those</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Legal</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/Nextcloud-NAS-Guide/docs/impressum">Impressum</a></li><li class="footer__item"><a class="footer__link-item" href="/Nextcloud-NAS-Guide/docs/privacy">Privacy Policy</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021 <a href="https://github.com/szaimen">szaimen</a> - Built with Docusaurus.</div></div></div></footer></div>
<script src="/Nextcloud-NAS-Guide/styles.6ab8f100.js"></script>
<script src="/Nextcloud-NAS-Guide/runtime~main.3412b025.js"></script>
<script src="/Nextcloud-NAS-Guide/main.b09f4235.js"></script>
<script src="/Nextcloud-NAS-Guide/1.c7bdbf01.js"></script>
<script src="/Nextcloud-NAS-Guide/2.788bbeb7.js"></script>
<script src="/Nextcloud-NAS-Guide/01a85c17.abdd3cf0.js"></script>
<script src="/Nextcloud-NAS-Guide/1a4e3797.08ebf7a4.js"></script>
<script src="/Nextcloud-NAS-Guide/1be78505.157dd22c.js"></script>
<script src="/Nextcloud-NAS-Guide/6875c492.e45179b6.js"></script>
<script src="/Nextcloud-NAS-Guide/a6aa9e1f.a2e56d0e.js"></script>
<script src="/Nextcloud-NAS-Guide/c4f5d8e4.c1d4e765.js"></script>
<script src="/Nextcloud-NAS-Guide/ccc49370.6313d194.js"></script>
<script src="/Nextcloud-NAS-Guide/130.fbc7aa28.js"></script>
<script src="/Nextcloud-NAS-Guide/129.c0ba868f.js"></script>
<script src="/Nextcloud-NAS-Guide/935f2afb.40e6de12.js"></script>
<script src="/Nextcloud-NAS-Guide/17896441.4a8beff2.js"></script>
<script src="/Nextcloud-NAS-Guide/093e44df.3b29c46f.js"></script>
</body>
</html>